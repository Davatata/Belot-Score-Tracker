// global variable to store current row during changes
var curRow = null;
var team1 = "Team1";
var team2 = "Team2";
var t1 = "T1";
var t2 = "T2";

function addRow(contract, attacker, suit, special, team1s, 
	team1b, team2s, team2b){
	// find the table and its last row
	var myTable = document.getElementById("score_table");
    var currentIndex = myTable.rows.length;
    var currentRow = myTable.insertRow(-1);

    // create 

}

$('#myform').submit(function () {
	/*
	var good = goodForm();
	if(!good) return false; 
	else{
		createRow();

		//$("#newBet").foundation('close');
		return false;
	}
	*/
});

$('.bet_row').click(function() {
	curRow = $(this);
	showRowModal();
});

function showRowModal(){
	$("#contract_amt").val(parseInt(curRow.find(':nth-child(1)').text()));
	$("#attacker_chosen").val((curRow.find(':nth-child(5)').text()));
	// suit -> (heart, diamo, clubs, spade)
	var suit = curRow.find(':nth-child(2)').html().substring(17,22);
	if(suit=="") suit = "A";
	console.log(suit);
	$("#suit_chosen").val(suit);
	$("#special_chosen").val((curRow.find(':nth-child(6)').text()));
	$("#team1_points").val(parseInt(curRow.find(':nth-child(7)').text()));
	$("#team1_bonus").val(parseInt(curRow.find(':nth-child(8)').text()));
	$("#team2_points").val(parseInt(curRow.find(':nth-child(9)').text()));
	$("#team2_bonus").val(parseInt(curRow.find(':nth-child(10)').text()));
	$("#newBet").foundation('open');
	

}

function closeTopBar(){
	$(".top-bar").toggle();
}

function newGame(){

}

function newBet(){
	resetModal();
	
}

function createRow(){
	var contract_amt = $("#contract_amt").val();
	var attacker_chosen = $("#attacker_chosen").val();
	var suit_chosen = $("#suit_chosen").val();
	var special_chosen = $("#special_chosen").val();
	var team1_points = $("#team1_points").val();
	var team1_bonus = $("#team1_bonus").val();
	var team2_points = $("#team2_points").val();
	var team2_bonus = $("#team2_bonus").val();

	var newRowHtml = '<tr class="bet_row back_white"><td class="text-center"></td><td class="text-center"></td><td class="text-center"></td><td class="text-center"></td> <td class="hidden"></td><td class="hidden"></td><td class="hidden"></td><td class="hidden"></td><td class="hidden"></td><td class="hidden"></td></tr>';

	$('#score_table > tbody:last').append(newRowHtml);
}

function resetModal(){
	$("#reset_button").trigger("click");
}

function getSuit(suit){
	var suit_img = "";
	switch(suit){
		case "heart":
			suit_img = '<img src="images/heart.png" />';
			break;
		case "spade":
			suit_img = '<img src="images/spade.png" />';
			break;
		case "clubs":
			suit_img = '<img src="images/clubs.png" />';
			break;
		case "diamo":
			suit_img = '<img src="images/diamo.png" />';
			break;
	}

	return suit_img;
}

function checkBet(){

}

function goodForm(){
	if( $("#contract_amt").hasClass('is-invalid-input') || 
		$("#attacker_chosen").hasClass('is-invalid-input') || 
		$("#suit_chosen").hasClass('is-invalid-input') || 
		$("#team1_points").hasClass('is-invalid-input') || 
		$("#team2_points").hasClass('is-invalid-input')
		){
			return false;
		}
	else{
		return true;
	}
}